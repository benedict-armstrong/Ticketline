<div class="addEvent">
  <form class="form" [formGroup]="addEventForm" (ngSubmit)="addEvent()">

    <h3>Add new Event</h3>

    <div class="form-group">
      <label for="eventName">Event name</label>
      <input type="text" name="eventName" formControlName="eventName" class="text-input form-control" id="eventName"
             placeholder="Enter event name">
      <div *ngIf="submitted && addEventForm.controls.eventName.errors" class="error">
        <small class="form-text text-danger" *ngIf="addEventForm.controls.eventName.errors.required">
          Event name is required!
        </small>
        <small class="form-text text-danger" *ngIf="addEventForm.controls.eventName.errors.maxLength">
          Event name cannot be more than 100 characters!
        </small>
      </div>
    </div>

    <div class="form-group">
      <label for="description">Description</label>
      <input type="text" name="description" formControlName="description" class="text-input form-control" id="description"
             placeholder="Enter description">
      <div *ngIf="submitted && addEventForm.controls.description.errors" class="error">
        <small class="form-text text-danger" *ngIf="addEventForm.controls.description.errors.required">
          Description is required!
        </small>
        <small class="form-text text-danger" *ngIf="addEventForm.controls.description.errors.maxLength">
          Description cannot be more than 100 characters!
        </small>
      </div>
    </div>

    <div class="form-group">
      <label for="date">Date</label>
      <input type="datetime-local" min="{{minDate}}" name="date" formControlName="date" class="form-control" id="date">
      <div *ngIf="submitted && addEventForm.controls.date.errors" class="error">
        <small class="form-text text-danger" *ngIf="addEventForm.controls.date.errors.required">
          Date is required!
        </small>
        <small class="form-text text-danger" *ngIf="addEventForm.controls.date.errors.min">
          Date must be in the future!
        </small>
      </div>
    </div>

    <div class="form-group">
      <label for="duration">Duration</label>
      <input type="number" name="duration" formControlName="duration" class="form-control" id="duration">
    </div>

    <div class="form-group">
      <label for="files">Picture Upload</label>
      <input formControlName="files" id="files" type="file" class="form-control" (change)="onFileChange($event)">
      <div *ngIf="fileNoImage" class="alert alert-danger">
        <div>The uploaded file is no image</div>
      </div>
      <div *ngIf="tooManyFiles" class="alert alert-danger">
        <div>Max. 10 images per event</div>
      </div>
    </div>

    <div *ngIf="files.length > 0">
      <table class="table">
        <thead>
        <tr>Name</tr>
        <tr style="width: 5%"></tr>
        </thead>
        <tbody>
        <tr *ngFor="let image of files; let i = index">
          <td>{{image.name}}</td>
          <td><button type="button" class="btn btn-primary" style="width: 100%" (click)="removeImage(i)">X</button></td>
        </tr>
        </tbody>
      </table>
    </div>

    <button type="button" (click)="addEvent()" id="create">Create</button>

    <div *ngIf="error" class="col-12 alert alert-danger alert-dismissible fade show" role="alert">
      <strong>Error! </strong> {{ errorMessage }}
      <button type="button" (click)="vanishAlert()" class="close" data-dismiss="alert" aria-label="Close">
        <span aria-hidden="true">&times;</span>
      </button>
    </div>
    <div *ngIf="success" class="col-12 alert alert-success alert-dismissible fade show" role="alert">
      <strong>Success</strong> The event is added.
      <button type="button" (click)="vanishAlert()" class="close" data-dismiss="alert" aria-label="Close">
        <span aria-hidden="true">&times;</span>
      </button>
    </div>
  </form>
</div>
