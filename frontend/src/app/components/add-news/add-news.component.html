<div class="addNews">
  <form class="form" [formGroup]="addNewsForm" (ngSubmit)="addNews()">

    <h3>Publish News</h3>

    <div class="form-group">
      <label for="title">Title</label>
      <input type="title" name="title" formControlName="title" class="text-input form-control" id="title"
             placeholder="Enter Title">
      <div *ngIf="submitted && addNewsForm.controls.title.errors" class="error">
        <small class="form-text text-danger" *ngIf="addNewsForm.controls.title.errors.required">
          Title is required!
        </small>
        <small class="form-text text-danger" *ngIf="addNewsForm.controls.title.errors.maxLength">
          Title cannot be more than 100 characters!
        </small>
      </div>
    </div>

    <div class="form-group">
      <label for="text">Text</label>
      <input type="text" name="text" formControlName="text" class="text-input form-control" id="text"
             placeholder="Enter Title">
      <div *ngIf="submitted && addNewsForm.controls.text.errors" class="error">
        <small class="form-text text-danger" *ngIf="addNewsForm.controls.text.errors.required">
          Text is required!
        </small>
        <small class="form-text text-danger" *ngIf="addNewsForm.controls.text.errors.maxLength">
          Text cannot be more than 100 characters!
        </small>
      </div>
    </div>

    <div class="form-group">
      <label for="event">Event</label>
      <select name="event" id="event" formControlName="event" class="select-input form-select">
        <option value="1">1</option>
        <option value="2">2</option>
        <option value="3">3</option>
      </select>
      <div *ngIf="submitted && addNewsForm.controls.event.errors" class="error">
        <small class="form-text text-danger" *ngIf="addNewsForm.controls.event.errors.required">
          An event selection is required!
        </small>
      </div>
    </div>

    <div class="form-group">
      <label for="files">Picture Upload</label>
      <input formControlName="files" id="files" type="file" class="form-control" (change)="onFileChange($event)">
      <div *ngIf="fileNoImage" class="alert alert-danger">
        <div>The uploaded file is no image</div>
      </div>
    </div>

    <div *ngIf="news.picture.length > 0">
      <table class="table">
        <thead>
        <th scope="col">Name</th>
        <th scope="col" style="width: 5%"></th>
        </thead>
        <tbody>
        <tr *ngFor="let image of news.picture; let i = index">
          <td>{{image.name}}</td>
          <td><button type="button" class="btn btn-primary" style="width: 100%" (click)="removeImage(i)">X</button></td>
        </tr>
        </tbody>
      </table>
    </div>

    <button type="button" (click)="addNews()" id="publish">Publish</button>

    <div *ngIf="error" class="col-12 alert alert-danger alert-dismissible fade show" role="alert">
      <strong>Error! </strong> {{ errorMessage }}
      <button type="button" (click)="vanishAlert()" class="close" data-dismiss="alert" aria-label="Close">
        <span aria-hidden="true">&times;</span>
      </button>
    </div>
    <div *ngIf="success" class="col-12 alert alert-success alert-dismissible fade show" role="alert">
      <strong>Success</strong> The user has been created.
      <button type="button" (click)="vanishAlert()" class="close" data-dismiss="alert" aria-label="Close">
        <span aria-hidden="true">&times;</span>
      </button>
    </div>
  </form>
</div>
